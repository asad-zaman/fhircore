"use strict";(self.webpackChunkfhircore=self.webpackChunkfhircore||[]).push([[5934],{9088:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>h,contentTitle:()=>s,default:()=>l,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var r=i(4848),o=i(8453);const t={},s="Form Authoring",a={id:"engineering/app/configuring/writing-fhir/form-authoring",title:"Form Authoring",description:"Things to consider when writing forms",source:"@site/docs/engineering/app/configuring/writing-fhir/form-authoring.mdx",sourceDirName:"engineering/app/configuring/writing-fhir",slug:"/engineering/app/configuring/writing-fhir/form-authoring",permalink:"/engineering/app/configuring/writing-fhir/form-authoring",draft:!1,unlisted:!1,editUrl:"https://github.com/opensrp/fhircore/tree/main/docs/engineering/app/configuring/writing-fhir/form-authoring.mdx",tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"FHIRPath expressions",permalink:"/engineering/app/configuring/writing-fhir/fhir_path"},next:{title:"PlanDefinitions",permalink:"/engineering/app/configuring/writing-fhir/plan-definiton"}},h={},c=[{value:"Things to consider when writing forms",id:"things-to-consider-when-writing-forms",level:2},{value:"How to pass answers/data from Questionnaire A to B",id:"how-to-pass-answersdata-from-questionnaire-a-to-b",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"form-authoring",children:"Form Authoring"})}),"\n",(0,r.jsx)(e.h2,{id:"things-to-consider-when-writing-forms",children:"Things to consider when writing forms"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Make sure that the ",(0,r.jsx)(e.code,{children:"enableWhen"})," expressions are accompanied by the ",(0,r.jsx)(e.code,{children:"enableBehaviour"})," attribute in order to avoid form crashes."]}),"\n",(0,r.jsxs)(e.li,{children:["The ",(0,r.jsx)(e.code,{children:"enableBehaviour"})," defines whether the expressions on the ",(0,r.jsx)(e.code,{children:"enableWhen"})," are to use ",(0,r.jsx)(e.code,{children:"and"})," or ",(0,r.jsx)(e.code,{children:"or"})," logic."]}),"\n",(0,r.jsxs)(e.li,{children:["The ",(0,r.jsx)(e.code,{children:"enableBehaviour"})," options are ",(0,r.jsx)(e.code,{children:"any"})," for ",(0,r.jsx)(e.code,{children:"or"})," & ",(0,r.jsx)(e.code,{children:"all"})," for ",(0,r.jsx)(e.code,{children:"and"}),"."]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "enableWhen": [\n    {\n      "question": "cf0093a9-1e38-422b-fc81-273caa0bb48a",\n      "operator": "=",\n      "answerCoding": {\n        "system": "urn:uuid:d3051c21-8668-412e-a2dd-105cf274b260",\n        "code": "no"\n      }\n    },\n    {\n      "question": "94357450-e603-49f7-899c-464ecd10ddd1",\n      "operator": "=",\n      "answerCoding": {\n        "system": "urn:uuid:4ae66618-142d-4e2c-dd66-5d63c14b83a9",\n        "code": "no"\n      }\n    },\n    {\n      "question": "14648d8c-c88f-40be-9f25-66d7ba621482",\n      "operator": "=",\n      "answerCoding": {\n        "system": "urn:uuid:08516020-d926-4463-863e-d6f45b0d317b",\n        "code": "no"\n      }\n    }\n  ],\n  "enableBehaviour":"all"\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"how-to-pass-answersdata-from-questionnaire-a-to-b",children:"How to pass answers/data from Questionnaire A to B"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Submit Questionnaire A"}),"\n",(0,r.jsx)(e.li,{children:"In Questionnaire B, use X-FHIR-Query variable to search the Questionnaire Response of Questionnaire A that also belongs to the Patient that did the submission"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'{\n  "url": "http://hl7.org/fhir/StructureDefinition/variable",\n  "valueExpression": {\n    "name": "qr-search-phq9",\n    "language": "application/x-fhir-query",\n    "expression": "QuestionnaireResponse?subject={{%patient.id.replaceMatches(\'/_history/.*\', \'\')}}&questionnaire=Questionnaire/57"\n  }\n},\n{\n  "url": "http://hl7.org/fhir/StructureDefinition/variable",\n  "valueExpression": {\n    "name": "qr-phq9",\n    "language": "text/fhirpath",\n    "expression": "%qr-search-phq9.entry.first().resource"\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"In Questionnaire B, get the answer of Questionnaire A through the variable that contains Questionnaire Response of Questionnaire A"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'{\n  "url": "http://hl7.org/fhir/StructureDefinition/variable",\n  "valueExpression": {\n    "name": "phq9-p1",\n    "language": "text/fhirpath",\n    "expression": "%qr-phq9.item.descendants().where(linkId=\'f1.3.1\').answer.value"\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"4",children:["\n",(0,r.jsx)(e.li,{children:"Call that variable in a calculated-expression so it can be populated into the field"}),"\n"]})]})}function l(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>a});var r=i(6540);const o={},t=r.createContext(o);function s(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);