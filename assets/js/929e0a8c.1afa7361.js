"use strict";(self.webpackChunkfhircore=self.webpackChunkfhircore||[]).push([[1302],{7875:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var t=i(4848),r=i(8453);const a={},s="Internationalization",o={id:"engineering/app/configuring/internationalization",title:"Internationalization",description:"On FHIR Core, we have three categories of entities that need localization:",source:"@site/docs/engineering/app/configuring/internationalization.mdx",sourceDirName:"engineering/app/configuring",slug:"/engineering/app/configuring/internationalization",permalink:"/engineering/app/configuring/internationalization",draft:!1,unlisted:!1,editUrl:"https://github.com/opensrp/fhircore/tree/main/docs/engineering/app/configuring/internationalization.mdx",tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"In-app reporting",permalink:"/engineering/app/configuring/in-app-reporting"},next:{title:"P2P Sync",permalink:"/engineering/app/configuring/p2p_sync"}},l={},c=[{value:"Application localization",id:"application-localization",level:2},{value:"Android views",id:"android-views",level:3},{value:"App configs",id:"app-configs",level:3},{value:"FHIR Resources",id:"fhir-resources",level:3},{value:"Rules engine",id:"rules-engine",level:3},{value:"Translation Process via Transifex",id:"translation-process-via-transifex",level:2},{value:"Tooling",id:"tooling",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"internationalization",children:"Internationalization"})}),"\n",(0,t.jsx)(n.p,{children:"On FHIR Core, we have three categories of entities that need localization:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Android views"}),"\n",(0,t.jsx)(n.li,{children:"App configs"}),"\n",(0,t.jsx)(n.li,{children:"Content configs (FHIR Resources)"}),"\n",(0,t.jsx)(n.li,{children:"Rule engine rules"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"application-localization",children:"Application localization"}),"\n",(0,t.jsx)(n.h3,{id:"android-views",children:"Android views"}),"\n",(0,t.jsxs)(n.p,{children:["The translations for these are found in the android app's ",(0,t.jsx)(n.code,{children:"res/values/strings-*.xml"})," files. These need to follow the ",(0,t.jsx)(n.a,{href:"https://developer.android.com/guide/topics/resources/localization%5D",children:"android developer guidelines"}),".\nAs an example, for an app with English and French translations, the folder will contain ",(0,t.jsx)(n.code,{children:"res/values/strings.xml"}),", the default english file and ",(0,t.jsx)(n.code,{children:"res/values/strings-fr.xml"})," for the corresponding French translations.\nNote, for FHIR Core"]}),"\n",(0,t.jsx)(n.p,{children:"Default file in English."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'#res/values/strings.xml\n<string name="first_name">First Name</string>\n'})}),"\n",(0,t.jsx)(n.p,{children:"Translated file in Swahili"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'#res/values/strings-sw.xml\n<string name="first_name">Jina la kwanza</string>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"app-configs",children:"App configs"}),"\n",(0,t.jsxs)(n.p,{children:["App config localization is required for the configuration files that define the UI and workflow of the configurable views we have on FHIR Core e.g. the Profile and Register configs. The language files are of the ",(0,t.jsx)(n.code,{children:".properties"})," format. By convention, the files are stored in the ",(0,t.jsx)(n.code,{children:"project/app_configs/translations"})," folder for versioning. Once translations are in place they are then uploaded as Binary's and are therefore are encoded in Base64 format in line with the HL7 FHIR Spec here ",(0,t.jsx)(n.a,{href:"https://www.hl7.org/fhir/binary.html",children:"https://www.hl7.org/fhir/binary.html"}),". These are then linked to the application via the Composition resource. Files are named in the format ",(0,t.jsx)(n.code,{children:"strings_config.properties"})," for the default and ",(0,t.jsx)(n.code,{children:"strings_sw_config.properties"})," for the swahili translations e.g."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'#app_configs/profiles/profile.json\n\n"searchBar": {\n    "visible": true,\n    "display": "{{ first.name }}",\n    "computedRules": [\n        "familyName",\n        "familyId"\n    ]\n}\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"Default"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"first.name=First Name\n"})}),"\n",(0,t.jsx)(n.p,{children:"Swahili"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"first.name=Jina la kwanza\n"})}),"\n",(0,t.jsx)(n.h3,{id:"fhir-resources",children:"FHIR Resources"}),"\n",(0,t.jsxs)(n.p,{children:["This covers Internationalization in the FHIR Resources e.g. Questionnaires. The ",(0,t.jsx)(n.a,{href:"https://www.hl7.org/fhir/languages.html",children:"FHIR Spec"})," defines how localization is supported. FHIR Core, via the Android FHIR SDK's Standard Data Capture library supports this implementation via the ",(0,t.jsx)(n.em,{children:"Translation Extension"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of the First Name field in a Questionnaire that is translated into Swahili:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'              "text": "First Name",\n              "_text": {\n                "extension": [\n                  {\n                    "extension": [\n                      {\n                        "url": "lang",\n                        "valueCode": "sw"\n                      },\n                      {\n                        "url": "content",\n                        "valueString": "Jina la kwanza"\n                      }\n                    ],\n                    "url": "http://hl7.org/fhir/StructureDefinition/translation"\n                  }\n                ]\n              }\n'})}),"\n",(0,t.jsx)(n.h3,{id:"rules-engine",children:"Rules engine"}),"\n",(0,t.jsxs)(n.p,{children:["Sometimes you need to have one part of the output as a calculated value before display. FHIR Core supports wrapping the calculated expression variable using ",(0,t.jsx)(n.code,{children:"@{"}),"and ",(0,t.jsx)(n.code,{children:"}"})," characters. e.g."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "viewType": "COMPOUND_TEXT",\n  "primaryText": "{{ task.start.date }}",\n  "primaryTextColor": "#5A5A5A",\n  "fontSize": 14.0\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Default"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"task.start.date=Start date: @{taskStartDate}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Swahili"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"task.start.date=Siku ya kuanza: @{taskStartDate}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"translation-process-via-transifex",children:"Translation Process via Transifex"}),"\n",(0,t.jsxs)(n.p,{children:["We use the Transifex service to manage the translation process. ",(0,t.jsx)(n.a,{href:"https://www.transifex.com/",children:"Transifex"})," is a well known platform that supports localization for many stacks including Android and is able to process files in different formats. You can upload the default language files in their ",(0,t.jsx)(n.code,{children:"xml"}),", ",(0,t.jsx)(n.code,{children:"properties"})," formats and then translators perform the localization on Transifex. The files are then synced back to the codebase for versioning."]}),"\n",(0,t.jsx)(n.h2,{id:"tooling",children:"Tooling"}),"\n",(0,t.jsx)(n.p,{children:"The efsity localization tool is designed to support localization through a translation extension, facilitating the extraction and merging of translation files for project resources. The tool's primary functions are extraction and merging, each tailored to streamline localization tasks."}),"\n",(0,t.jsxs)(n.p,{children:["Extraction involves pulling specific fields from a resource or an entire directory and generating a ",(0,t.jsx)(n.code,{children:"strings_default.properties"})," file, typically placed in the translation folder. Users can specify a different location for the translation file using the appropriate flag. This process is optimized when the project's directory structure is consistent, ensuring that all relevant text and display fields are captured accurately. Options available during extraction allow users to define the mode (either extraction or merging), the path to the resource file or directory, and the type of extraction (such as all files, configuration files, or FHIR content files)."]}),"\n",(0,t.jsx)(n.p,{children:"Merging, on the other hand, is used to integrate translated fields from a provided translation file back into the original resources or directories. This functionality is crucial for updating project files with the latest translations, ensuring that localized content is correctly populated. Similar to extraction, merging operates most effectively within a consistent project structure. Users can specify the mode, the resource file or directory path, the translation file path, and the translation locale."}),"\n",(0,t.jsx)(n.p,{children:"Overall, the localization tool enhances the management of translations within a project, providing clear commands and options to extract and merge localization files efficiently. By adhering to a consistent directory structure, users can ensure smooth and accurate localization processes, ultimately supporting the delivery of localized content across different environments and applications."}),"\n",(0,t.jsxs)(n.p,{children:["For a step-by-step on how to use the localization tool to support translations please read more ",(0,t.jsx)(n.a,{href:"https://github.com/onaio/fhir-tooling/tree/main/efsity#localization",children:"here"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var t=i(6540);const r={},a=t.createContext(r);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);